How Web Works Exercise

Part One: Solidify Terminology

1. What is HTTP?
Hypertext Transfer Protocal

2. What is a URL?
An address to connect to a website

3. What is DNS?
Domain Name System. It translates a website to it's IP address.

4. What is a query string?
info passed to the the URL.

5. What are two HTTP verbs and how are they different?
GET & POST. Get retrieves info. POST is a reuest to change info.

6. What is an HTTP request?
One of the verbs mentioned above. A GET request , a POST request,
a PUT request , a DELETE request, etc.

7. What is an HTTP response?
Each type of HTTP request will generate an HTTP response.
A code indicates its result. 200, 304, 404, etc.

8. What is an HTTP header? Give a couple examples of request and response headers you have seen.
Info about the repsonse. The format of the data being returned, the language the results are in, etc.

9. What are the processes that happen when you type “http://somesite.com/some/page.html” into a browser?
An http request is made to some.site.com. DNS finds the IP for some.site.com and makes a GET request to
get info for some/page.html.




Part Two: Practice Tools

1. Using curl, make a GET request to the icanhazdadjoke.com API to find all jokes involving
the word “pirate”

<!-- pstern@Home:~/Exercises/Unit12/connect-four-oo$ curl -v https://icanhazdadjoke.com/search?term=pirate
*   Trying 104.21.37.176:443...
* TCP_NODELAY set
* Connected to icanhazdadjoke.com (104.21.37.176) port 443 (#0)
* ALPN, offering h2
* ALPN, offering http/1.1
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: /etc/ssl/certs
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
* TLSv1.3 (IN), TLS handshake, Server hello (2):
* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
* TLSv1.3 (IN), TLS handshake, Certificate (11):
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
* TLSv1.3 (IN), TLS handshake, Finished (20):
* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):
* TLSv1.3 (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN, server accepted to use h2
* Server certificate:
*  subject: C=US; ST=California; L=San Francisco; O=Cloudflare, Inc.; CN=sni.cloudflaressl.com
*  start date: Jul  5 00:00:00 2021 GMT
*  expire date: Jul  4 23:59:59 2022 GMT
*  subjectAltName: host "icanhazdadjoke.com" matched cert's "icanhazdadjoke.com"
*  issuer: C=US; O=Cloudflare, Inc.; CN=Cloudflare Inc ECC CA-3
*  SSL certificate verify ok.
* Using HTTP2, server supports multi-use
* Connection state changed (HTTP/2 confirmed)
* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0
* Using Stream ID: 1 (easy handle 0x55eb84a71820)
> GET /search?term=pirate HTTP/2
> Host: icanhazdadjoke.com
> user-agent: curl/7.68.0
> accept: */*
>
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* old SSL session ID is stale, removing
* Connection state changed (MAX_CONCURRENT_STREAMS == 256)!
< HTTP/2 200
< date: Mon, 27 Sep 2021 01:03:26 GMT
< content-type: text/plain
< content-length: 295
< cache-control: max-age=0, must-revalidate, no-cache, no-store, public, s-maxage=0
< x-frame-options: DENY
< x-xss-protection: 1; mode=block
< cf-cache-status: DYNAMIC
< expect-ct: max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v3?s=DRFBa9bzgroA0XDaan9kb5g347dw0ISssVLSOIm2ELod%2BJ7p%2BaO7dlUG1%2BNlTBOoh6y7e0q828zDQ%2BC1QhAnzKsKZ0fCZeywYFvH5%2F39xT2x3HbW%2FgeuOvQZByR9KBjTjkmhVRs%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< strict-transport-security: max-age=15552000; includeSubDomains
< x-content-type-options: nosniff
< server: cloudflare
< cf-ray: 6950cfef8cbfebb5-LAX
< alt-svc: h3=":443"; ma=86400, h3-29=":443"; ma=86400, h3-28=":443"; ma=86400, h3-27=":443"; ma=86400
<
What does a pirate pay for his corn? A buccaneer!
What did the pirate say on his 80th birthday? Aye Matey!
Why couldn't the kid see the pirate movie? Because it was rated arrr!
Why do pirates not know the alphabet? They always get stuck at "C".
* Connection #0 to host icanhazdadjoke.com left intact
Why are pirates called pirates? Because they arrr! -->


2. Use dig to find what the IP address is for icanhazdadjoke.com
<!-- pstern@Home:~/Exercises/Unit14$ dig icanhazdadjoke.com

    ; <<>> DiG 9.16.1-Ubuntu <<>> icanhazdadjoke.com
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 5533
    ;; flags: qr rd ad; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0
    ;; WARNING: recursion requested but not available
    
    ;; QUESTION SECTION:
    ;icanhazdadjoke.com.            IN      A
    
    ;; ANSWER SECTION:
    icanhazdadjoke.com.     0       IN      A       104.21.37.176
    icanhazdadjoke.com.     0       IN      A       172.67.211.64
    
    ;; Query time: 20 msec
    ;; SERVER: 172.19.224.1#53(172.19.224.1)
    ;; WHEN: Sun Sep 26 17:05:43 PDT 2021
    ;; MSG SIZE  rcvd: 86 -->

3. Make a simple web page and serve it using python3 -m http.server. Visit the page in a browser.
<!-- pstern@Home:~/Exercises/Unit12/connect-four-oo$ python3 -m http.server
        Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
        127.0.0.1 - - [26/Sep/2021 17:12:47] "GET / HTTP/1.1" 200 -
        127.0.0.1 - - [26/Sep/2021 17:12:47] "GET /connect4.css HTTP/1.1" 200 -
        127.0.0.1 - - [26/Sep/2021 17:12:47] "GET /connect4.js HTTP/1.1" 200 -
        127.0.0.1 - - [26/Sep/2021 17:12:47] code 404, message File not found
        127.0.0.1 - - [26/Sep/2021 17:12:47] "GET /favicon.ico HTTP/1.1" 404 - -->


Part Three: Explore Dev Tool
Build a very simple HTML form that uses the GET method
(it can use the same page URL for the action) when the form is submitted.

indexBootstrapForms.html

Add a field or two to the form and, after submitting it, explore in Chrome Developer tools how you can view the request
and response headers.

<!-- Response
Accept-Ranges: bytes
Connection: Keep-Alive
Content-Encoding: gzip
Content-Length: 12038
Content-Type: text/html
Date: Mon, 27 Sep 2021 02:44:34 GMT
Keep-Alive: timeout=15, max=98
Last-Modified: Fri, 17 Sep 2021 19:26:14 GMT
Server: Apache
Set-Cookie: BIGipServer~CUIT~www.columbia.edu-80-pool=1764244352.20480.0000; expires=Mon, 27-Sep-2021 08:44:34 GMT; path=/; Httponly
Vary: Accept-Encoding,User-Agent

Request 
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Accept-Encoding: gzip, deflate
Accept-Language: en-US,en;q=0.9
Connection: keep-alive
Host: www.columbia.edu
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36

Query
state: AL -->

Edit the page to change the form type to POST, refresh in the browser and re-submit.
Do you still see the field in the query string? Explore in Chrome how you can view
the request and response headers, as well as the form data.

No query string with POST


Part Four: Explore the URL API

At times, it’s useful for your JavaScript to look at the URL of the browser window and change how the script works
depending on parts of that (particularly the query string).

Read about the URL API

Try some of the code examples in the Chrome Console so that you can get comfortable with the basic methods and
properties for instances of the URL class.


let addr = new URL("https://mysite.com/login?user=someguy&page=news");
undefined
addr.searchParams.get('user')
'someguy'
addr.searchParams.get('page')
'news'
addr.searchParams.get('host')
null
let host = addr.host
undefined
host
'mysite.com'
let pathname = addr.pathname
undefined
pathname
'/login'
let href = addr.href
undefined
href
'https://mysite.com/login?user=someguy&page=news'
let hostname = addr.hostname
undefined
hostname
'mysite.com'
let protocol = addr.protocol
undefined
protocol
'https:'